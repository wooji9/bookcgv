{"title":"AWS Fargate/APM/DB","description":"\n","widgets":[{"id":2267548884472136,"definition":{"title":"Summary","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5082152045957294,"definition":{"title":"TPS","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":450},{"comparator":">=","palette":"white_on_yellow","value":450},{"comparator":">=","palette":"white_on_red","value":700}],"response_format":"scalar","queries":[{"query":"sum:trace.servlet.request.hits{$clustername}.as_rate()","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"bars"}},"layout":{"x":0,"y":0,"width":1,"height":1}},{"id":4439522187158666,"definition":{"title":"Memory","type":"query_value","requests":[{"formulas":[{"formula":"query2"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":60},{"comparator":">","palette":"white_on_yellow","value":60},{"comparator":">","palette":"white_on_red","value":80}],"response_format":"scalar","queries":[{"query":"avg:aws.ecs.service.memory_utilization{$clustername}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"area"}},"layout":{"x":1,"y":0,"width":1,"height":1}},{"id":3987842600274488,"definition":{"title":"CPU","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":45},{"comparator":">","palette":"white_on_yellow","value":45},{"comparator":">","palette":"white_on_red","value":60}],"response_format":"scalar","queries":[{"query":"avg:aws.ecs.service.cpuutilization{$clustername}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"area"}},"layout":{"x":2,"y":0,"width":1,"height":1}},{"id":373258582286008,"definition":{"title":"Latency","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":150},{"comparator":">","palette":"white_on_yellow","value":150},{"comparator":">","palette":"white_on_red","value":300}],"response_format":"scalar","queries":[{"query":"p50:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"area"}},"layout":{"x":3,"y":0,"width":1,"height":1}},{"id":872968320253266,"definition":{"title":"Busy Thread","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":300},{"comparator":">","palette":"white_on_yellow","value":300},{"comparator":">","palette":"white_on_red","value":600}],"response_format":"scalar","queries":[{"query":"sum:tomcat.threads.busy{$clustername}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_unit":"개","precision":0,"timeseries_background":{"type":"bars"}},"layout":{"x":4,"y":0,"width":1,"height":1}},{"id":8785070687646258,"definition":{"title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"background","hide_zero_counts":false,"show_status":true,"last_triggered_format":"relative","query":" $clustername","sort":"status,desc","count":50,"start":0,"summary_type":"monitors","show_priority":true,"show_last_triggered":false},"layout":{"x":5,"y":0,"width":3,"height":2}},{"id":2249049509786936,"definition":{"title":"\bSLA Sample","title_size":"16","title_align":"left","type":"slo","slo_id":"fb11080f379350eb8b76a516505967fb","view_type":"detail","view_mode":"overall","time_windows":["7d"],"show_error_budget":true,"global_time_target":"0"},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":7437042151667402,"definition":{"title":"Running Task 수","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":25},{"comparator":"<=","palette":"white_on_yellow","value":36},{"comparator":">","palette":"white_on_red","value":36}],"response_format":"scalar","queries":[{"query":"sum:aws.ecs.service.running{$clustername}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_unit":"개","precision":2,"timeseries_background":{"type":"bars"}},"layout":{"x":0,"y":1,"width":1,"height":1}},{"id":3943742439139236,"definition":{"title":"Error Rate","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"formulas":[{"formula":"(query3 + query4) / (query1 + query2 + query3 + query4) * 100"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0.02},{"comparator":">=","palette":"white_on_yellow","value":0.02},{"comparator":">=","palette":"white_on_red","value":0.1}],"response_format":"scalar","queries":[{"query":"sum:aws.applicationelb.httpcode_target_4xx{$clustername}.as_count()","data_source":"metrics","name":"query3","aggregator":"sum"},{"query":"sum:aws.applicationelb.httpcode_target_5xx{$clustername}.as_count()","data_source":"metrics","name":"query4","aggregator":"sum"},{"query":"sum:aws.applicationelb.httpcode_target_2xx{$clustername}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:aws.applicationelb.httpcode_target_3xx{$clustername}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":false,"custom_unit":"%","precision":3,"timeseries_background":{"type":"bars"}},"layout":{"x":1,"y":1,"width":1,"height":1}},{"id":6721897227360938,"definition":{"title":"Error Count","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"formulas":[{"formula":"default_zero(query4)"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":50},{"comparator":">=","palette":"white_on_yellow","value":50},{"comparator":">=","palette":"white_on_red","value":80}],"response_format":"scalar","queries":[{"query":"sum:trace.servlet.request.hits{http.status_code:5*,$clustername}.as_count()","data_source":"metrics","name":"query4","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"건","precision":3},"layout":{"x":2,"y":1,"width":1,"height":1}},{"id":5732948047999956,"definition":{"title":"응답시간","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query0"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":200},{"comparator":">","palette":"white_on_yellow","value":200},{"comparator":">","palette":"white_on_red","value":300}],"response_format":"scalar","queries":[{"query":"min:aws.applicationelb.target_response_time.average{$clustername}","data_source":"metrics","name":"query0","aggregator":"last"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"area"}},"layout":{"x":3,"y":1,"width":1,"height":1}},{"id":2447207025428910,"definition":{"title":"AvgThread","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1 / query2"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":50},{"comparator":">","palette":"white_on_yellow","value":80},{"comparator":">","palette":"white_on_red","value":100}],"response_format":"scalar","queries":[{"query":"sum:tomcat.threads.busy{$clustername}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:aws.ecs.service.running{$clustername}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":true,"custom_unit":"개","precision":0,"timeseries_background":{"type":"bars"}},"layout":{"x":4,"y":1,"width":1,"height":1}}]},"layout":{"x":0,"y":0,"width":12,"height":3}},{"id":2284646564677612,"definition":{"title":"Fargate Metrics","background_color":"blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2835597864537104,"definition":{"title":"Desired Task","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ecs.service.desired{$clustername}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars"}},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":5042567310387684,"definition":{"title":"Pending Task 수","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ecs.service.pending{$clustername}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars"}},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":3759385021795396,"definition":{"title":"aws.ecs.service (desired/pending/running)","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ecs.service.desired{$clustername}.rollup(sum, 60)","data_source":"metrics","name":"query2"}],"style":{"palette":"purple","line_type":"dotted","line_width":"thin"},"display_type":"line"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ecs.service.pending{$clustername}.rollup(sum, 60)","data_source":"metrics","name":"query0"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ecs.service.running{$clustername}.rollup(sum, 60)","data_source":"metrics","name":"query0"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":8,"height":2}},{"id":678904571067940,"definition":{"title":"aws.ecs.service.cpuutilization","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ecs.service.cpuutilization{$clustername} by {servicename,clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":7819083649318226,"definition":{"title":"aws.ecs.service.memory_utilization","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ecs.service.memory_utilization{$clustername} by {servicename,clustername}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":8050973292485700,"definition":{"title":"ecs.fargate.io.ops.write","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:ecs.fargate.io.ops.write{$clustername} by {ecs_container_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":4070443569272774,"definition":{"title":"ecs.fargate.io.ops.read","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:ecs.fargate.io.ops.read{$clustername} by {ecs_container_name,task_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":6998572466041312,"definition":{"title":"Average ingoing packets dropped by container","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:ecs.fargate.net.packet.in_dropped{$clustername} by {ecs_container_name,task_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":7498718804661322,"definition":{"title":"Average outgoing packets dropped by container","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:ecs.fargate.net.packet.out_dropped{$clustername} by {task_name,ecs_container_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":4770729391284464,"definition":{"title":"Average bytes received per container","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:ecs.fargate.net.bytes_rcvd{$clustername} by {ecs_container_name,task_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":4,"height":2}},{"id":8614574776882074,"definition":{"title":"Average bytes sent per container","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:ecs.fargate.net.bytes_sent{$clustername} by {ecs_container_name,task_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":6,"width":4,"height":2}},{"id":5503512579152156,"definition":{"title":"Running Thread","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:tomcat.threads.max{$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"green","line_type":"dashed","line_width":"thick"},"display_type":"line"},{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:tomcat.threads.busy{$clustername} by {runtime-id,service}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"sum:tomcat.threads.busy{$clustername}","data_source":"metrics","name":"query0"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":6,"width":4,"height":2}}]},"layout":{"x":0,"y":3,"width":12,"height":9}},{"id":2215262711445224,"definition":{"title":"Application 현황(APM)","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3816437708584794,"definition":{"title":"HTTP 응답 코드별 비율","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:trace.servlet.request.hits{$clustername} by {http.status_code}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"hide_percent":false,"type":"inline"}},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":2592143030116338,"definition":{"title":"API endpoint 별 호출 빈도 및 Latency","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"sum:trace.servlet.request.hits{$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"p75:trace.servlet.request{$clustername} by {resource_name}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:trace.servlet.request{$clustername} by {resource_name}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"sum:trace.servlet.request.errors{$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query4","aggregator":"sum"}],"sort":{"count":500,"order_by":[{"type":"formula","index":3,"order":"desc"}]},"formulas":[{"alias":"호출 빈도","formula":"query1"},{"alias":"p75 Latency","conditional_formats":[{"palette":"white_on_red","value":5,"comparator":">"},{"palette":"white_on_yellow","value":0.5,"comparator":">"},{"palette":"white_on_green","value":0.5,"comparator":"<="}],"formula":"query2"},{"alias":"avg Latency","conditional_formats":[{"palette":"white_on_red","value":5,"comparator":">"},{"palette":"white_on_yellow","value":0.5,"comparator":">"},{"palette":"white_on_green","value":1,"comparator":"<="}],"formula":"query3"},{"alias":"에러 빈도","conditional_formats":[{"palette":"red_on_white","value":10,"comparator":">"},{"palette":"yellow_on_white","value":1,"comparator":">"}],"formula":"query4"}]}]},"layout":{"x":4,"y":0,"width":8,"height":4}},{"id":5530297809508944,"definition":{"title":"최근 발생한 Error 유형(Global Time)","title_size":"16","title_align":"left","requests":[{"query":{"query_string":"$clustername","data_source":"apm_issue_stream"},"columns":[{"field":"details","width":"auto"},{"field":"count","width":"auto"},{"field":"volume","width":"auto"}],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":0,"y":4,"width":12,"height":4}},{"id":2909500077712139,"definition":{"title":" 요청 현황(Fargate) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.servlet.request.hits{$clustername}.as_count().rollup(sum)","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.servlet.request.errors{$clustername}.as_count().rollup(sum)","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":8,"width":6,"height":3}},{"id":4883636180775853,"definition":{"title":" Latency 현황(fargate)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"p50","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p50:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p75","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p75:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p90","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p90:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p95","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p95:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1","alias":"p99"}],"response_format":"timeseries","queries":[{"query":"p99:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1","alias":"max"}],"response_format":"timeseries","queries":[{"query":"max:trace.servlet.request{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":8,"width":6,"height":3}},{"id":7928523979465922,"definition":{"title":" Latency 현황(fargate)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"max","formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"p95:trace.servlet.request{$clustername} by {service,resource_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":11,"width":12,"height":3}}]},"layout":{"x":0,"y":12,"width":12,"height":15}},{"id":3534516089500110,"definition":{"title":"REDIS 관련","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":182566242565082,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.redis.query.hits{$service,$clustername}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"calendar_shift(query0, '-1w', 'UTC')"}],"response_format":"timeseries","queries":[{"query":"sum:trace.redis.query.hits{$service,$clustername}.as_rate()","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":4922664865719066,"definition":{"title":"분당 쿼리수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.redis.query.hits{$service,$clustername}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"calendar_shift(query0, '-1w', 'UTC')"}],"response_format":"timeseries","queries":[{"query":"sum:trace.redis.query.hits{$service,$clustername}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":5726003340626872,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:trace.redis.query{$service,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"p95:trace.redis.query{$service,$clustername}","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":6597173461776650,"definition":{"title":"Query분포도","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:trace.redis.query.hits{$service,$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":12,"height":3}},{"id":814293646215284,"definition":{"title":"Query","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"sum:trace.redis.query.hits{$service,$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":3689319749370296,"definition":{"title":"Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"p90:trace.redis.query{$service,$clustername} by {resource_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}}]},"layout":{"x":0,"y":27,"width":12,"height":14}},{"id":4018934327861548,"definition":{"title":"Loadbalancer & WAF","background_color":"vivid_orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3428967942527076,"definition":{"title":"alb 요청 현황","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"},{"formula":"query3"},{"formula":"query4"}],"response_format":"timeseries","queries":[{"query":"sum:aws.applicationelb.httpcode_target_2xx{$clustername}.as_count()","data_source":"metrics","name":"query1"},{"query":"sum:aws.applicationelb.httpcode_target_3xx{$clustername}.as_count()","data_source":"metrics","name":"query2"},{"query":"sum:aws.applicationelb.httpcode_target_4xx{$clustername}.as_count()","data_source":"metrics","name":"query3"},{"query":"sum:aws.applicationelb.httpcode_target_5xx{$clustername}.as_count()","data_source":"metrics","name":"query4"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":3}},{"id":7895080022465330,"definition":{"title":"alb 응답시간 트렌드","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query0"},{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:aws.applicationelb.target_response_time.average{$clustername}","data_source":"metrics","name":"query0"},{"query":"avg:aws.applicationelb.target_response_time.average{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":3}},{"id":6203015228600054,"definition":{"title":"alb new/active connection","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:aws.applicationelb.new_connection_count{$clustername}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"green","line_type":"dashed","line_width":"thin"},"display_type":"line"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"max:aws.applicationelb.active_connection_count{$clustername}.as_count()","data_source":"metrics","name":"query0"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":3}},{"id":2347838642027182,"definition":{"title":"Rule별 허용된 요청 현황","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:aws.wafv2.allowed_requests{$clustername} by {rule}","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","hide_total":false,"legend":{"type":"inline"}},"layout":{"x":0,"y":3,"width":6,"height":4}},{"id":1929270034567788,"definition":{"title":"Label별 차단된 현황","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"style":{"palette":"dogcat"},"response_format":"scalar","queries":[{"query":"sum:aws.wafv2.blocked_requests{$clustername} by {rule}","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","hide_total":false,"legend":{"type":"inline"}},"layout":{"x":6,"y":3,"width":6,"height":4}},{"id":4641004185584314,"definition":{"title":"Rule별 허용된 요청 현황","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.wafv2.allowed_requests{$clustername} by {rule}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":6,"height":3}},{"id":1700301876264904,"definition":{"title":"Label별 차단된 현황","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.wafv2.blocked_requests{$clustername} by {labelname,rule}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":7,"width":6,"height":3}},{"id":1167611450016790,"definition":{"title":"Active Connections","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.applicationelb.active_connection_count{$clustername} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":0,"y":10,"width":3,"height":2}},{"id":1767044334317384,"definition":{"title":"New Connections","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.applicationelb.new_connection_count{$clustername} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":3,"y":10,"width":3,"height":2}},{"id":3757892364407608,"definition":{"title":"HTTP 2xx Responses","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.applicationelb.httpcode_target_2xx{$clustername} by {host}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":6,"y":10,"width":3,"height":2}},{"id":2887309018150280,"definition":{"title":"HTTP 2xx Responses (resouces)","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"search":{"query":"@http.status_code:2* $clustername retained_by:retention_filter"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query2","indexes":[],"group_by":[{"facet":"resource_name","sort":{"aggregation":"count","order":"desc"},"limit":50}]}],"formulas":[{"formula":"query2"}],"sort":{"count":50,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":9,"y":10,"width":3,"height":2}},{"id":5882797621454374,"definition":{"title":"HTTP 4xx Responses","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.applicationelb.httpcode_target_4xx{$clustername} by {host}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":12,"width":3,"height":2}},{"id":999890668577978,"definition":{"title":"HTTP 4xx Responses (resouces)","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"search":{"query":"@http.status_code:(404 OR 401 OR 400) $clustername retained_by:retention_filter"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query2","indexes":[],"group_by":[{"facet":"resource_name","sort":{"aggregation":"count","order":"desc"},"limit":50}]}],"formulas":[{"formula":"query2"}],"sort":{"count":50,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":3,"y":12,"width":3,"height":2}},{"id":2971161070778908,"definition":{"title":"HTTP 5xx Responses","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.applicationelb.httpcode_target_5xx{$clustername} by {host}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":6,"y":12,"width":3,"height":2}},{"id":1280456903996272,"definition":{"title":"HTTP 5xx Responses (resouces)","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"search":{"query":"@http.status_code:5* $clustername retained_by:retention_filter"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query2","indexes":[],"group_by":[{"facet":"resource_name","sort":{"aggregation":"count","order":"desc"},"limit":50}]}],"formulas":[{"formula":"query2"}],"sort":{"count":50,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":9,"y":12,"width":3,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":15,"is_column_break":true}},{"id":8701676973648714,"definition":{"title":"JVM","background_color":"pink","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":739707185586216,"definition":{"title":"GC Major & Minor Collection Count","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.gc.minor_collection_count{$clustername}","data_source":"metrics","name":"query1"},{"query":"avg:jvm.gc.major_collection_count{$clustername}","data_source":"metrics","name":"query2"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true}},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":6388934181324700,"definition":{"title":"Non-Heap Usage","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.non_heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"min:jvm.non_heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query2"},{"query":"avg:jvm.non_heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query3"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"avg:jvm.non_heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":6870251955079186,"definition":{"title":"GC Old Gen Size","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.gc.old_gen_size{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"min:jvm.gc.old_gen_size{*,*,*,$clustername}","data_source":"metrics","name":"query2"},{"query":"avg:jvm.gc.old_gen_size{*,*,*,$clustername}","data_source":"metrics","name":"query3"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"avg:jvm.gc.old_gen_size{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":7173924346736690,"definition":{"title":"Heap Usage","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"min:jvm.heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query2"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"max:jvm.heap_memory_max{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"thin"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"avg:jvm.heap_memory{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":8855970354510594,"definition":{"title":"Non-Heap Usage (top 10)","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, \"mean\", \"desc\")"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.non_heap_memory{*,*,*,$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":5771970558620018,"definition":{"title":"GC Old Gen Size (top 10)","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, \"mean\", \"desc\")"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.gc.old_gen_size{*,*,*,$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":1285962945963248,"definition":{"title":"Heap Usage (top 10)","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.heap_memory_max{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"thin"},"display_type":"line"},{"formulas":[{"formula":"top(query1, 10, \"mean\", \"desc\")"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.heap_memory{*,*,*,$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":7573626799812036,"definition":{"title":"Number of Classes Loaded","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.loaded_classes{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"min:jvm.loaded_classes{*,*,*,$clustername}","data_source":"metrics","name":"query2"},{"query":"avg:jvm.loaded_classes{*,*,*,$clustername}","data_source":"metrics","name":"query3"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"avg:jvm.loaded_classes{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":7869505266634592,"definition":{"title":"Thread Count","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.thread_count{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"min:jvm.thread_count{*,*,*,$clustername}","data_source":"metrics","name":"query2"},{"query":"avg:jvm.thread_count{*,*,*,$clustername}","data_source":"metrics","name":"query3"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"avg:jvm.thread_count{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":8410772919868694,"definition":{"title":"GC New Gen Size","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:jvm.gc.eden_size{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"min:jvm.gc.eden_size{*,*,*,$clustername}","data_source":"metrics","name":"query2"},{"query":"avg:jvm.gc.eden_size{*,*,*,$clustername}","data_source":"metrics","name":"query3"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"query":"avg:jvm.gc.eden_size{*,*,*,$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":6,"width":4,"height":2}},{"id":7604943174458828,"definition":{"title":"Number of Classes Loaded (top 10)","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, \"mean\", \"desc\")"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.loaded_classes{*,*,*,$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":4,"y":6,"width":4,"height":2}},{"id":844999945673988,"definition":{"title":"Thread Count (top 10)","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, \"mean\", \"desc\")"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.thread_count{*,*,*,$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}},"layout":{"x":8,"y":6,"width":4,"height":2}},{"id":2471999895656586,"definition":{"title":"GC New Gen Size (top 10)","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, \"mean\", \"desc\")"}],"response_format":"timeseries","queries":[{"query":"avg:jvm.gc.eden_size{*,*,*,$clustername} by {runtime-id}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":8,"width":4,"height":2}},{"id":8916096182173874,"definition":{"title":"GC Major & Minor Collection Time","show_legend":true,"legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"avg:jvm.gc.minor_collection_time{*,*,*,$clustername}","data_source":"metrics","name":"query1"},{"query":"avg:jvm.gc.major_collection_time{*,*,*,$clustername}","data_source":"metrics","name":"query2"}],"style":{"palette":"grey","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true}},"layout":{"x":4,"y":8,"width":4,"height":2}}]},"layout":{"x":0,"y":15,"width":12,"height":11}},{"id":1742311474916886,"definition":{"title":"Database","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8891850733121352,"definition":{"title":"DB 쿼리 호출 빈도","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mysql.query.hits{$clustername}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mysql.query.errors{$clustername}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[],"custom_links":[{"override_label":"hosts","is_hidden":false,"link":"https://app.datadoghq.com/screen/integration/240/oracle-database-overview?tpl_var_host=scmat-ibs-db&from_ts=1643335478337&to_ts=1643336378337&live=true"}]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":1360810909910260,"definition":{"title":"MysqlDB 쿼리 Latency","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"p50","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p50:trace.mysql.query{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p75","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p75:trace.mysql.query{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p90","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p90:trace.mysql.query{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p95","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p95:trace.mysql.query{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"p99","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"p99:trace.mysql.query{$clustername}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1","alias":"max"}],"response_format":"timeseries","queries":[{"query":"max:trace.oracle.query{$clustername}","data_source":"metrics","name":"query1"}],"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[],"custom_links":[{"override_label":"hosts","is_hidden":false,"link":"https://app.datadoghq.com/screen/integration/240/oracle-database-overview?tpl_var_host=scmat-ibs-db&from_ts=1643335478337&to_ts=1643336378337&live=true"}]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":4475863421220174,"definition":{"title":"Mysql DB 쿼리 수행시간 분포도","title_size":"16","title_align":"left","show_legend":false,"type":"distribution","xaxis":{"max":"p95","min":"auto"},"yaxis":{"max":"auto","scale":"linear","min":"auto"},"markers":[{"display_type":"x_axis_percentile","value":"50"},{"display_type":"x_axis_percentile","value":"75"},{"display_type":"x_axis_percentile","value":"90"},{"display_type":"x_axis_percentile","value":"95"},{"display_type":"x_axis_percentile","value":"99"}],"requests":[{"query":{"stat":"latency_distribution","data_source":"apm_resource_stats","name":"query1","service":"mysql","group_by":["resource_name"],"env":"stage","operation_name":"mysql.query"},"request_type":"histogram"}]},"layout":{"x":0,"y":3,"width":12,"height":3}},{"id":8845569581593794,"definition":{"title":"Mysql Query별 처리시간","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mysql.query.hits{$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query0"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":0,"y":6,"width":12,"height":3}},{"id":5444929613275340,"definition":{"title":"Mysql Query별 처리시간","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"p95:trace.mysql.query{$clustername} by {resource_name}","data_source":"metrics","name":"query0"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":9,"width":6,"height":3}},{"id":8473818595379596,"definition":{"title":"Mysql Query (오래걸린 쿼리 Top)","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_red","value":100}],"response_format":"scalar","queries":[{"query":"p95:trace.mysql.query{$clustername} by {resource_name}","data_source":"metrics","name":"query0","aggregator":"avg"}],"formulas":[{"formula":"query0"}],"sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":6,"y":9,"width":6,"height":3}},{"id":6734770534873358,"definition":{"title":"Mysql Query별 처리시간 (소요시간 x 호출 빈도)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query0 * query1"}],"response_format":"timeseries","queries":[{"query":"p95:trace.mysql.query{$clustername} by {resource_name}","data_source":"metrics","name":"query0"},{"query":"sum:trace.mysql.query.hits{$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":12,"width":6,"height":3}},{"id":5547832685939640,"definition":{"title":"Mysql Query별 처리시간 (소요시간 x 호출 빈도)","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_red","value":100}],"response_format":"scalar","queries":[{"query":"p95:trace.mysql.query{$clustername} by {resource_name}","data_source":"metrics","name":"query0","aggregator":"avg"},{"query":"sum:trace.mysql.query.hits{$clustername} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query0 * query1"}],"sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":6,"y":12,"width":6,"height":3}},{"id":1291082228660304,"definition":{"title":"MysqlDB Slow OR Error 쿼리 호출 빈도","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"search":{"query":"service:mysql $clustername retained_by:retention_filter"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query0","indexes":[],"group_by":[{"facet":"resource_name","sort":{"aggregation":"count","order":"desc"},"limit":25}]}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":15,"width":6,"height":3}},{"id":7009311994335220,"definition":{"title":"Mysql Query별 처리시간","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"avg:trace.mysql.query{$clustername} by {resource_name}","data_source":"metrics","name":"query0","aggregator":"avg"},{"query":"sum:trace.mysql.query.hits{$clustername} by {resource_name}.as_count().rollup(sum)","data_source":"metrics","name":"query1","aggregator":"sum"}],"sort":{"count":100,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"formula":"query0","conditional_formats":[{"palette":"white_on_red","comparator":">","value":3},{"palette":"white_on_yellow","comparator":">","value":0.5}]},{"formula":"query1"}]}]},"layout":{"x":6,"y":15,"width":6,"height":3}}]},"layout":{"x":0,"y":26,"width":12,"height":19}}],"template_variables":[{"name":"service","prefix":"service","available_values":[],"default":"*"},{"name":"env","prefix":"env","available_values":[],"default":"*"},{"name":"cluster","prefix":"cluster","available_values":[],"default":"*"},{"name":"servicename","prefix":"servicename","available_values":[],"default":"*"},{"name":"clustername","prefix":"clustername","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}